sudo: required
services:
- docker
language: python
python:
- '3.5'
env:
  matrix:
  - TEST_PATTERN=tests/test_enterprise.py::TestEnterpriseIntegrationTests::test_run_pytest
  - TEST_PATTERN=tests/test_enterprise.py::TestWaitForDCOS::test_auth_with_cli
  - TEST_PATTERN=tests/test_enterprise.py::TestCopyFiles::test_copy_files_to_installer
  - TEST_PATTERN=tests/test_node.py::TestNode
  - TEST_PATTERN=tests/test_cluster.py::TestIntegrationTests::test_run_pytest
  - TEST_PATTERN=tests/test_cluster.py::TestExtendConfig::test_extend_config
  - TEST_PATTERN=tests/test_cluster.py::TestExtendConfig::test_default_config
  - TEST_PATTERN=tests/test_cluster.py::TestClusterSize
  - TEST_PATTERN=tests/test_cluster.py::TestInstallDcosFromPathLogging
  - TEST_PATTERN=tests/test_cluster.py::TestMultipleClusters::test_two_clusters
  - TEST_PATTERN=tests/test_cluster.py::TestClusterFromNodes
  - TEST_PATTERN=tests/backends/test_docker.py::TestDockerBackend
  - TEST_PATTERN=tests/backends/test_aws.py::TestAWSBackend
  global:
  - secure: DCA/nGUV8IUrFg7SmL8K2WvLd3V/6JD7RINUyzBoKoADmJ9xvcQOI8Zm91//fJtiTNpEZOfOkFXYVQwGHAoPlgaS5/ENqbCV+4zn4RoS3q+WvuAaRR/mXj+z2Jzbgp+x9Pe1FTJroY521+Qqj1sjl9nQK24WOUPhlXe9bdFiRCNAK49r+dxa7dURVq0WyOcBk22psTxXpuBRfciV/dzun2llfdL0Ur9+enlMwj13HByMxR+TOPcsZ6ZXC4A8SxKKSpkT19lCTmfW34Ks0N6Gfqaad46eqfc97mwTyIaGW73iVLRsiI5sjBlXTlsdp2qPmn7WJih7BNOFdcoLNmqHW72akon+z5On2K5kwUqvobtrJ+d0n8hf+5HozZz4Tl6glByeMcWlcQgOqLZuH5scZK3U0rHOqeTsEDBlg45Y1CrTOCHWvetFgMwa9QQlmVNmnkWQ0B5fDuspW+sjqbeTMwwQk/2+eWYgi8vaR9N6gEouqUg5nZmpk3ppmY8NxHaVe1w5WWMOJyyws3T4f78eubGs3KLL2fcgLVhCWQNYa5zXXZRPG9d+kJsCCJFK7Bj8cIva31zbLTkTlA80xDxRYw33PvkWRKMP08zkyoo4MiYKvq42fpLuv7BbOksK1GosX+YvxyRK+yr0Uix62vNc4c6MwwLmtxWzJQEjOLEl4FU=
  - secure: JxRTV2JvnRiN4W0DsK85tN2PSXjFCJN2JLoWG2pwtDJ/UrzeNtP7vmBSvZDh13i4Fqkoeow5zHySyUb+275uuO8kxaK+Pn7zsH6Cnu05QlAnYAFadnltTLSvh1e+fBBK/87YyHBFXOPZFPDp+sP1+jWO1W/lGAh8KfqFh1JCFYUEzRsdxAxS+B4X/UnUNKEv+aeZp1GEVAhhU2zHOKa95NAjUMsvtD00vhaow74KSuDwoSKcnAl0yQfC/VZNm7Xl6KsxNLO9fglzWjtBFhbsMZpHfDcdv0+MMwmTT21NJT8F75qldLyBAba+qKaj8wChjGzKPqjeywq0Y9qW2sOOlwvE2PHBrayUVTxp5m80/edz3qumNmWd5blmiD6uCC0yV52ZFGiwM/SsWrL51yU6Rh0F/VSbnk6YVVJzAl020C6oqiuUAwZx6hG1F9APvUy4nxF3GTSaXbXxBkSzgQiSiU93K4V8oV/U8gGP68JNMW4LWBJB2TNEzwplq9kPz/DhAUaJUPZtEsuwosSFufCyU1cy5Bi1Wx4gyrpyrrj/vGmf3bMZKTwv2ddk2XoFNXs/P8TRM08Dl172+ET2BkeO57tVv6BCeNvTesmRSesH+dI+quyIZswyqRR9kbU6OPU3wPkr8BTUrpWrKp1qN10t+Keqp4GrIyJcdCDH4TbeI4I=
  - secure: YC/evoI1fzC2AMtx06v3JJ0FL3dqyOHMV2uCZffc9BENfqHYjHwQ+/DSaqLugLnaLUDCX9YdoyLtOF3Zmc/oH1u4WJlZUBMHAdpotWzCjiQ1MSkxYbvcahc39GCaNqiCRr+F+dPYnxPmDGfGwxZnuJ+uenq3Pti3rPSwn6Oe7gwMjYh1n6bOT92Ot9L19AvBCpshnlo9/2oOP3yXLIYZ99pzUrrdUxDE7STlEtr1gzJSGGg9TO1PXe2/uHoDELoHxE1xCBPs923NoUtQyHjVRR9U1KXJZWDGGhNcX+IWSUkxPesXTSkYEVT5+WtX3FckHV/QQuLekPyjg45jOwRbnGEmnoDvRu24bu6E9Vgk45cL9jFyCiEh/m1cz3T/YppM4Wl6iSMdYneQhaEdqAB8/VGuhy5n8f9mQWEzL4Y+g3HoUD1QNWAtNq4yyeDH+OYcuxCnH/1WDT/65MyuZdmU/wCIG346pPWHMyzNN36iFSFnaypyp20AWMwELAvrF0UmwKFzuN0FPXRYMSE/P9ppeCXvxKSViEWtQYy8mDM0RFfLeoOJz44RQ1JoO+/2hd/rlGdoJ/sPVKtzenjpSELXZqXjJOgDe8D9+bfqZ7Tc8Ps3TLeNDfv6NWFQNOxjeseH6pa2Ma2d9Hs07zEZ4U+x8jDtaMzBU5fuT4sb4ihTcz4=
before_install:
- travis_retry pip install --upgrade pip setuptools codecov
- travis_retry sudo apt-get update
- travis_retry sudo apt-get install docker-ce enchant
- travis_retry npm -g install npm@latest
install:
- travis_retry pip install --upgrade --process-dependency-links --editable .[dev]
- travis_retry npm install
cache: pip
before_script:
- make clean
- make lint
- travis_retry make EE_ARTIFACT_URL=$EE_ARTIFACT_URL download-artifacts
script:
- pytest -vvv -s "$TEST_PATTERN" --cov=src --cov=tests
after_success:
- codecov
